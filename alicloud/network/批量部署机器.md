我们通过给一个ECS绑定辅助弹性网卡的方式。让一台ECS可以使用两个EIP。
上海目前交换机使用的是24网段，目前只能承载250多台服务器。由于辅助弹性网卡至少需要占用一个EIP的关系，所以目前给上海规划100台ECS，200个EIP。后续应该不会再扩容。
从零开始部署：
规划好VPC，提前根据实例的规模规划子网。之前测试的时候，辅助弹性网卡绑定了两个私网IP，导致后续部署的时候，子网IP不够，删除一个后可以正常使用。由于交换机在部署后，无法修改子网规模，所以这一步需要提前考虑。
正式部署：
购买一台测试服务器，在上面安装配置好squid后，将其制作成镜像。通过自定义镜像购买部署100台实例。
1. 通过createnetworkinterface.py脚本购买100个辅助弹性网卡。
2. 通过describenetworkinterface.py获取上海区域辅助网卡的ID。
3. 通过describeecs.py脚本获取上海区域ECS的ID。
4. 通过attachnetworktoecs.py脚本绑定上海区域的ECS和辅助网卡。